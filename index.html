<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>JARVIS - AI Agent Builder</title>
    <style>
        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
        }
        
        body {
            font-family: 'Segoe UI', system-ui, sans-serif;
            background: linear-gradient(135deg, #0f0c29, #302b63, #24243e);
            color: white;
            min-height: 100vh;
            padding: 20px;
        }
        
        .container {
            max-width: 1200px;
            margin: 0 auto;
        }
        
        .header {
            background: rgba(0, 0, 0, 0.3);
            backdrop-filter: blur(10px);
            border: 1px solid rgba(102, 126, 234, 0.3);
            border-radius: 20px;
            padding: 20px 30px;
            margin-bottom: 30px;
            display: flex;
            justify-content: space-between;
            align-items: center;
        }
        
        .header-left {
            display: flex;
            align-items: center;
            gap: 15px;
        }
        
        .logo {
            width: 50px;
            height: 50px;
            background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
            border-radius: 12px;
            display: flex;
            align-items: center;
            justify-content: center;
            font-size: 24px;
        }
        
        .title h1 {
            font-size: 32px;
            font-weight: 700;
            background: linear-gradient(45deg, #667eea 0%, #764ba2 100%);
            -webkit-background-clip: text;
            -webkit-text-fill-color: transparent;
            background-clip: text;
        }
        
        .title p {
            font-size: 12px;
            color: #888;
        }
        
        .tabs {
            display: flex;
            gap: 10px;
            align-items: center;
        }
        
        .tab-btn {
            padding: 10px 20px;
            background: rgba(255, 255, 255, 0.1);
            border: none;
            border-radius: 10px;
            color: white;
            cursor: pointer;
            transition: all 0.3s;
            font-size: 14px;
        }
        
        .tab-btn:hover {
            background: rgba(255, 255, 255, 0.2);
        }
        
        .tab-btn.active {
            background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
        }
        
        .status-indicator {
            display: flex;
            align-items: center;
            gap: 8px;
            padding: 8px 15px;
            background: rgba(0, 0, 0, 0.3);
            border-radius: 20px;
            font-size: 12px;
        }
        
        .status-dot {
            width: 8px;
            height: 8px;
            border-radius: 50%;
            background: #888;
        }
        
        .status-dot.listening {
            background: #4ade80;
            animation: pulse 1.5s infinite;
        }
        
        .status-dot.detecting {
            background: #fbbf24;
            animation: pulse 1.5s infinite;
        }
        
        .status-dot.processing {
            background: #60a5fa;
        }
        
        @keyframes pulse {
            0%, 100% { opacity: 1; }
            50% { opacity: 0.5; }
        }
        
        .chat-container {
            background: rgba(0, 0, 0, 0.2);
            backdrop-filter: blur(10px);
            border: 1px solid rgba(102, 126, 234, 0.2);
            border-radius: 20px;
            height: 600px;
            overflow-y: auto;
            padding: 20px;
            margin-bottom: 20px;
        }
        
        .welcome {
            height: 100%;
            display: flex;
            flex-direction: column;
            align-items: center;
            justify-content: center;
            text-align: center;
        }
        
        .welcome-icon {
            font-size: 80px;
            margin-bottom: 20px;
        }
        
        .welcome h2 {
            font-size: 28px;
            margin-bottom: 10px;
        }
        
        .welcome p {
            color: #888;
            margin-bottom: 30px;
            max-width: 500px;
        }
        
        .quick-actions {
            display: grid;
            grid-template-columns: repeat(2, 1fr);
            gap: 15px;
            margin-top: 20px;
        }
        
        .quick-btn {
            padding: 15px 20px;
            background: rgba(102, 126, 234, 0.2);
            border: 1px solid rgba(102, 126, 234, 0.3);
            border-radius: 15px;
            cursor: pointer;
            transition: all 0.3s;
            color: white;
            font-size: 14px;
        }
        
        .quick-btn:hover {
            background: rgba(102, 126, 234, 0.4);
            transform: translateY(-2px);
        }
        
        .message {
            margin-bottom: 15px;
            display: flex;
            animation: slideIn 0.3s ease;
        }
        
        @keyframes slideIn {
            from {
                opacity: 0;
                transform: translateY(10px);
            }
            to {
                opacity: 1;
                transform: translateY(0);
            }
        }
        
        .message.user {
            justify-content: flex-end;
        }
        
        .message-bubble {
            max-width: 70%;
            padding: 15px 20px;
            border-radius: 20px;
            font-size: 14px;
            line-height: 1.5;
        }
        
        .message.user .message-bubble {
            background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
        }
        
        .message.assistant .message-bubble {
            background: rgba(255, 255, 255, 0.1);
        }
        
        .message.system .message-bubble {
            background: rgba(34, 197, 94, 0.2);
            border: 1px solid rgba(34, 197, 94, 0.3);
        }
        
        .input-area {
            display: flex;
            gap: 10px;
        }
        
        .mic-button {
            width: 60px;
            height: 60px;
            border-radius: 50%;
            border: none;
            background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
            color: white;
            font-size: 24px;
            cursor: pointer;
            transition: all 0.3s;
            position: relative;
        }
        
        .mic-button:hover {
            transform: scale(1.1);
        }
        
        .mic-button.listening {
            background: linear-gradient(135deg, #f093fb 0%, #f5576c 100%);
            animation: pulse 1s infinite;
        }
        
        .mic-pulse {
            position: absolute;
            top: -4px;
            right: -4px;
            width: 12px;
            height: 12px;
            background: #f5576c;
            border-radius: 50%;
            animation: ping 1s infinite;
        }
        
        @keyframes ping {
            0% {
                transform: scale(1);
                opacity: 1;
            }
            100% {
                transform: scale(2);
                opacity: 0;
            }
        }
        
        .text-input {
            flex: 1;
            padding: 18px 25px;
            border-radius: 30px;
            border: 2px solid rgba(102, 126, 234, 0.2);
            background: rgba(255, 255, 255, 0.1);
            color: white;
            font-size: 16px;
            outline: none;
            transition: all 0.3s;
        }
        
        .text-input:focus {
            border-color: rgba(102, 126, 234, 0.5);
        }
        
        .text-input::placeholder {
            color: rgba(255, 255, 255, 0.5);
        }
        
        .send-button {
            padding: 18px 35px;
            border-radius: 30px;
            border: none;
            background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
            color: white;
            font-size: 16px;
            font-weight: 600;
            cursor: pointer;
            transition: all 0.3s;
        }
        
        .send-button:hover {
            transform: translateY(-2px);
            box-shadow: 0 5px 20px rgba(102, 126, 234, 0.4);
        }
        
        .tab-content {
            display: none;
        }
        
        .tab-content.active {
            display: block;
        }
        
        .agents-grid {
            display: grid;
            grid-template-columns: repeat(auto-fill, minmax(300px, 1fr));
            gap: 20px;
        }
        
        .agent-card {
            background: rgba(0, 0, 0, 0.2);
            backdrop-filter: blur(10px);
            border: 1px solid rgba(102, 126, 234, 0.2);
            border-radius: 15px;
            padding: 20px;
            transition: all 0.3s;
        }
        
        .agent-card:hover {
            border-color: rgba(102, 126, 234, 0.5);
            transform: translateY(-5px);
        }
        
        .agent-name {
            font-size: 18px;
            font-weight: 600;
            margin-bottom: 5px;
        }
        
        .agent-type {
            color: #888;
            font-size: 12px;
            margin-bottom: 15px;
        }
        
        .agent-actions {
            display: flex;
            gap: 10px;
        }
        
        .btn {
            padding: 10px 20px;
            border: none;
            border-radius: 10px;
            cursor: pointer;
            transition: all 0.3s;
            font-size: 14px;
        }
        
        .btn-primary {
            background: rgba(102, 126, 234, 0.3);
            color: white;
            flex: 1;
        }
        
        .btn-primary:hover {
            background: rgba(102, 126, 234, 0.5);
        }
        
        .code-actions {
            display: flex;
            gap: 10px;
            margin-bottom: 20px;
        }
        
        .btn-success {
            background: #22c55e;
            color: white;
        }
        
        .btn-info {
            background: #3b82f6;
            color: white;
        }
        
        .btn-warning {
            background: #a855f7;
            color: white;
        }
        
        .code-display {
            background: #1a1a1a;
            border: 1px solid rgba(102, 126, 234, 0.2);
            border-radius: 15px;
            padding: 25px;
            overflow-x: auto;
        }
        
        .code-display pre {
            color: #4ade80;
            font-family: 'Consolas', 'Monaco', monospace;
            font-size: 13px;
            line-height: 1.6;
            white-space: pre-wrap;
        }
        
        .empty-state {
            text-align: center;
            padding: 60px 20px;
            color: #888;
        }
        
        .empty-state-icon {
            font-size: 60px;
            margin-bottom: 20px;
            opacity: 0.5;
        }
        
        ::-webkit-scrollbar {
            width: 8px;
        }
        
        ::-webkit-scrollbar-track {
            background: rgba(255, 255, 255, 0.05);
            border-radius: 10px;
        }
        
        ::-webkit-scrollbar-thumb {
            background: rgba(255, 255, 255, 0.2);
            border-radius: 10px;
        }
    </style>
</head>
<body>
    <div class="container">
        <div class="header">
            <div class="header-left">
                <div class="logo">🤖</div>
                <div class="title">
                    <h1>JARVIS</h1>
                    <p>AI Agent Builder & Code Generator</p>
                </div>
            </div>
            <div class="tabs">
                <button class="tab-btn active" onclick="switchTab('chat')">Chat</button>
                <button class="tab-btn" onclick="switchTab('agents')">Agents (<span id="agent-count">0</span>)</button>
                <button class="tab-btn" onclick="switchTab('code')">Code</button>
                <div class="status-indicator">
                    <div class="status-dot" id="status-dot"></div>
                    <span id="status-text">ready</span>
                </div>
            </div>
        </div>

        <div id="chat-tab" class="tab-content active">
            <div class="chat-container" id="chat-messages">
                <div class="welcome">
                    <div class="welcome-icon">⚡</div>
                    <h2>Welcome to JARVIS</h2>
                    <p>I can build AI agents and generate code for you. Click microphone to speak or type below!</p>
                    <div class="quick-actions">
                        <button class="quick-btn" onclick="sendCommand('Create a web scraper agent')">🕷️ Web Scraper</button>
                        <button class="quick-btn" onclick="sendCommand('Build a chatbot agent')">💬 Chatbot</button>
                        <button class="quick-btn" onclick="sendCommand('Create an API client')">🔌 API Client</button>
                        <button class="quick-btn" onclick="sendCommand('Build automation agent')">🤖 Automation</button>
                    </div>
                </div>
            </div>

            <div class="input-area">
                <button class="mic-button" id="mic-btn" onclick="toggleVoice()" title="Click to speak">
                    🎤
                    <div class="mic-pulse" id="mic-pulse" style="display: none;"></div>
                </button>
                <input type="text" class="text-input" id="text-input" placeholder="Tell JARVIS what to build..." onkeypress="handleKeyPress(event)">
                <button class="send-button" onclick="handleSend()">Send</button>
            </div>
        </div>

        <div id="agents-tab" class="tab-content">
            <div class="agents-grid" id="agents-grid">
                <div class="empty-state">
                    <div class="empty-state-icon">📦</div>
                    <h3>No agents yet</h3>
                    <p>Create your first agent in the Chat tab</p>
                </div>
            </div>
        </div>

        <div id="code-tab" class="tab-content">
            <div class="code-actions">
                <button class="btn btn-info" onclick="copyCode()">📋 Copy Code</button>
                <button class="btn btn-success" onclick="downloadCode()">💾 Download</button>
                <button class="btn btn-warning" onclick="deployInfo()">🚀 Deploy Guide</button>
            </div>
            <div class="code-display">
                <pre id="code-display">
<div class="empty-state">
    <div class="empty-state-icon">💻</div>
    <p>No code yet. Create an agent first!</p>
</div>
                </pre>
            </div>
        </div>
    </div>

    <script src="https://cdnjs.cloudflare.com/ajax/libs/highlight.js/11.9.0/highlight.min.js"></script>
    <script>
        let recognition;
        let isListening = false;
        let agents = [];
        let currentCode = '';

        // Initialize speech recognition
        if ('webkitSpeechRecognition' in window) {
            recognition = new webkitSpeechRecognition();
            recognition.continuous = false;
            recognition.interimResults = true;
            recognition.lang = 'en-US';

            recognition.onstart = () => {
                isListening = true;
                updateStatus('listening');
                document.getElementById('mic-btn').classList.add('listening');
                document.getElementById('mic-pulse').style.display = 'block';
                addSystemMessage('🎤 Listening... Speak now!');
            };

            recognition.onresult = (event) => {
                let transcript = '';
                for (let i = event.resultIndex; i < event.results.length; i++) {
                    transcript = event.results[i][0].transcript;
                    if (!event.results[i].isFinal) {
                        document.getElementById('text-input').value = transcript + '...';
                        updateStatus('detecting');
                    } else {
                        document.getElementById('text-input').value = transcript;
                        updateStatus('processing');
                        setTimeout(() => {
                            sendCommand(transcript);
                            updateStatus('ready');
                        }, 100);
                    }
                }
            };

            recognition.onerror = (event) => {
                isListening = false;
                updateStatus('ready');
                resetMicButton();
                if (event.error === 'not-allowed') {
                    addSystemMessage('⚠️ Microphone permission denied! Please allow access in browser settings.');
                } else if (event.error === 'no-speech') {
                    addSystemMessage('⏱️ No speech detected. Try speaking closer to the microphone.');
                }
            };

            recognition.onend = () => {
                isListening = false;
                updateStatus('ready');
                resetMicButton();
            };
        }

        function toggleVoice() {
            if (!recognition) {
                addSystemMessage('❌ Speech recognition not available. Use Chrome or Edge browser.');
                return;
            }

            if (isListening) {
                recognition.stop();
            } else {
                try {
                    recognition.start();
                } catch (error) {
                    console.error('Start error:', error);
                }
            }
        }

        function resetMicButton() {
            document.getElementById('mic-btn').classList.remove('listening');
            document.getElementById('mic-pulse').style.display = 'none';
        }

        function updateStatus(status) {
            const dot = document.getElementById('status-dot');
            const text = document.getElementById('status-text');
            text.textContent = status;
            dot.className = 'status-dot ' + status;
        }

        function handleKeyPress(event) {
            if (event.key === 'Enter') {
                handleSend();
            }
        }

        function handleSend() {
            const input = document.getElementById('text-input');
            const command = input.value.trim();
            if (command) {
                sendCommand(command);
                input.value = '';
            }
        }

        function sendCommand(command) {
            addMessage('user', command);
            setTimeout(() => processCommand(command), 500);
        }

        function processCommand(command) {
            const lower = command.toLowerCase();
            
            let agentType = 'chatbot';
            if (lower.includes('scraper') || lower.includes('scrape')) {
                agentType = 'web-scraper';
            } else if (lower.includes('api') || lower.includes('client')) {
                agentType = 'api-client';
            } else if (lower.includes('data') || lower.includes('process')) {
                agentType = 'data-processor';
            } else if (lower.includes('automat')) {
                agentType = 'automation';
            }

            if (lower.includes('create') || lower.includes('build') || lower.includes('generate')) {
                const code = generateAgentCode(agentType);
                currentCode = code;
                
                const agent = {
                    id: Date.now(),
                    name: agentType.split('-').map(w => w.charAt(0).toUpperCase() + w.slice(1)).join(' ') + ' Agent',
                    type: agentType,
                    code: code
                };
                
                agents.push(agent);
                updateAgentsList();
                
                const response = `✅ I've created a ${agentType} agent! Check the Code tab to view, copy, and deploy it.`;
                addMessage('assistant', response);
                speak(response);
                
            } else if (lower.includes('hello') || lower.includes('hi')) {
                const response = "Hello! I'm JARVIS. I can create web scrapers, chatbots, API clients, automation agents, and more. What would you like to build?";
                addMessage('assistant', response);
                speak(response);
                
            } else if (lower.includes('help')) {
                const response = "I can build AI agents for you! Try: 'Create a web scraper', 'Build a chatbot', 'Make an API client', or 'Generate an automation agent'.";
                addMessage('assistant', response);
                speak(response);
                
            } else {
                const response = "I can help you build AI agents. Try saying: 'Create a web scraper agent' or 'Build me a chatbot'";
                addMessage('assistant', response);
                speak(response);
            }
        }

        function generateAgentCode(type) {
            const templates = {
                'web-scraper': `// Web Scraper Agent
class WebScraperAgent {
  async scrape(url, selectors) {
    try {
      const response = await fetch(url);
      const html = await response.text();
      const parser = new DOMParser();
      const doc = parser.parseFromString(html, 'text/html');
      
      const data = {};
      for (const key in selectors) {
        const element = doc.querySelector(selectors[key]);
        data[key] = element ? element.textContent.trim() : null;
      }
      return data;
    } catch (error) {
      console.error('Scraping failed:', error);
      return null;
    }
  }
}

// Example usage
const scraper = new WebScraperAgent();
scraper.scrape('https://example.com', {
  title: 'h1',
  description: '.description',
  price: '.price'
}).then(data => console.log(data));`,
                
                'chatbot': `// Chatbot Agent
class ChatbotAgent {
  constructor(responses) {
    this.responses = responses || {};
    this.context = {};
  }

  processMessage(message) {
    const lower = message.toLowerCase();
    
    for (const key in this.responses) {
      if (lower.includes(key.toLowerCase())) {
        const response = this.responses[key];
        return typeof response === 'function' ? response(this.context) : response;
      }
    }
    
    return "I'm not sure how to respond to that. Can you rephrase?";
  }

  updateContext(key, value) {
    this.context[key] = value;
  }
}

// Example usage
const bot = new ChatbotAgent({
  'hello': 'Hi! How can I help you today?',
  'help': 'I can assist with various tasks. What do you need?',
  'time': () => 'Current time is ' + new Date().toLocaleTimeString(),
  'bye': 'Goodbye! Have a great day!'
});

console.log(bot.processMessage('hello'));`,
                
                'api-client': `// API Client Agent
class APIClientAgent {
  constructor(baseURL, headers = {}) {
    this.baseURL = baseURL;
    this.headers = headers;
    this.retryCount = 3;
  }

  async request(endpoint, options = {}) {
    const url = this.baseURL + endpoint;
    const config = {
      ...options,
      headers: { ...this.headers, ...options.headers }
    };

    for (let i = 0; i < this.retryCount; i++) {
      try {
        const response = await fetch(url, config);
        if (!response.ok) throw new Error('HTTP ' + response.status);
        return await response.json();
      } catch (error) {
        if (i === this.retryCount - 1) throw error;
        await new Promise(r => setTimeout(r, 1000 * (i + 1)));
      }
    }
  }

  async get(endpoint) {
    return this.request(endpoint, { method: 'GET' });
  }

  async post(endpoint, data) {
    return this.request(endpoint, {
      method: 'POST',
      headers: { 'Content-Type': 'application/json' },
      body: JSON.stringify(data)
    });
  }
}

// Example usage
const api = new APIClientAgent('https://api.example.com', {
  'Authorization': 'Bearer YOUR_TOKEN'
});

api.get('/users').then(data => console.log(data));`,
                
                'automation': `// Automation Agent
class AutomationAgent {
  constructor(tasks) {
    this.tasks = tasks || [];
  }

  async executeTask(task) {
    console.log('Executing:', task.name);
    
    try {
      if (task.action) {
        await task.action();
      }
      return { success: true, task: task.name };
    } catch (error) {
      return { success: false, task: task.name, error: error.message };
    }
  }

  async run() {
    console.log('Automation starting...');
    const results = [];
    
    for (const task of this.tasks) {
      const result = await this.executeTask(task);
      results.push(result);
      
      if (task.delay) {
        await new Promise(resolve => setTimeout(resolve, task.delay));
      }
    }
    
    console.log('Automation complete:', results);
    return results;
  }

  schedule(interval) {
    setInterval(() => this.run(), interval);
  }
}

// Example usage
const automation = new AutomationAgent([
  {
    name: 'Task 1',
    action: async () => console.log('Performing task 1...'),
    delay: 1000
  },
  {
    name: 'Task 2',
    action: async () => console.log('Performing task 2...')
  }
]);

automation.run();`
            };
            
            return templates[type] || templates['chatbot'];
        }

        function addMessage(role, content) {
            const container = document.getElementById('chat-messages');
            
            // Remove welcome screen
            const welcome = container.querySelector('.welcome');
            if (welcome) {
                container.innerHTML = '';
            }
            
            const messageDiv = document.createElement('div');
            messageDiv.className = `message ${role}`;
            
            const bubble = document.createElement('div');
            bubble.className = 'message-bubble';
            bubble.textContent = content;
            
            messageDiv.appendChild(bubble);
            container.appendChild(messageDiv);
            container.scrollTop = container.scrollHeight;
        }

        function addSystemMessage(message) {
            addMessage('system', message);
        }

        function speak(text) {
            const utterance = new SpeechSynthesisUtterance(text);
            utterance.rate = 1.1;
            speechSynthesis.speak(utterance);
        }

        function switchTab(tab) {
            // Hide all tabs
            document.querySelectorAll('.tab-content').forEach(t => t.classList.remove('active'));
            document.querySelectorAll('.tab-btn').forEach(t => t.classList.remove('active'));
            
            // Show selected tab
            document.getElementById(tab + '-tab').classList.add('active');
            event.target.classList.add('active');
            
            // Update code display if viewing code tab
            if (tab === 'code' && currentCode) {
                document.getElementById('code-display').textContent = currentCode;
            }
        }

        function updateAgentsList() {
            document.getElementById('agent-count').textContent = agents.length;
            
            const grid = document.getElementById('agents-grid');
            if (agents.length === 0) return;
            
            grid.innerHTML = agents.map(agent => `
                <div class="agent-card">
                    <div class="agent-name">${agent.name}</div>
                    <div class="agent-type">${agent.type}</div>
                    <div class="agent-actions">
                        <button class="btn btn-primary" onclick="viewAgent(${agent.id})">View Code</button>
                    </div>
                </div>
            `).join('');
        }

        function viewAgent(id) {
            const agent = agents.find(a => a.id === id);
            if (agent) {
                currentCode = agent.code;
                document.querySelector('.tab-btn:nth-child(3)').click();
            }
        }

        function copyCode() {
            if (currentCode) {
                navigator.clipboard.writeText(currentCode);
                addSystemMessage('✅ Code copied to clipboard!');
            }
        }

        function downloadCode() {
            if (currentCode) {
                const blob = new Blob([currentCode], { type: 'text/javascript' });
                const url = URL.createObjectURL(blob);
                const a = document.createElement('a');
                a.href = url;
                a.download = 'agent.js';
                a.click();
                URL.revokeObjectURL(url);
                addSystemMessage('✅ Code downloaded as agent.js!');
            }
        }

        function deployInfo() {
            addSystemMessage('🚀 To deploy: 1) Copy code 2) Go to Vercel.com or Netlify.com 3) Create new project 4) Paste code 5) Deploy! Need help? Ask me!');
        }
    </script>
</body>
</html>